(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Yj9t:function(e,r,t){"use strict";t.r(r),t.d(r,"AuthModule",(function(){return h}));var o=t("ofXK"),i=t("tyNb"),a=t("3Pt+"),s=t("fXoL"),n=t("tk/3"),l=t("5eHb");let c=(()=>{class e{constructor(e,r,t,o){this.formBuilder=e,this.http=r,this.toastr=t,this.router=o,this.forgotPasswordForm=this.formBuilder.group({email:[null,[a.o.required]],password:[null,[a.o.required]],confirmPassword:[null,[a.o.required]]})}ngOnInit(){}forgotPassword(){this.forgotPasswordForm.value.password==this.forgotPasswordForm.value.confirmPassword?this.http.post("http://localhost:3000/api/forgotPassword",this.forgotPasswordForm.value).subscribe(e=>{this.toastr.success(e.message),this.router.navigate([""])},e=>{this.toastr.error(e.error)}):this.toastr.error("Passwords do not match")}}return e.\u0275fac=function(r){return new(r||e)(s.Pb(a.b),s.Pb(n.b),s.Pb(l.b),s.Pb(i.b))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-forgot-password"]],decls:13,vars:1,consts:[[1,"container"],[3,"formGroup","submit"],["for","email"],["type","text","id","email","placeholder","Email","formControlName","email"],["for","pass"],["type","password","id","pass","placeholder","New Password","formControlName","password"],["for","confirmPass"],["type","password","id","confirmPass","placeholder","Confirm password","formControlName","confirmPassword"],["type","submit",1,"btn","btn-primary"]],template:function(e,r){1&e&&(s.Vb(0,"div",0),s.Vb(1,"form",1),s.dc("submit",(function(){return r.forgotPassword()})),s.Vb(2,"label",2),s.Ac(3,"Email"),s.Ub(),s.Qb(4,"input",3),s.Vb(5,"label",4),s.Ac(6,"Password"),s.Ub(),s.Qb(7,"input",5),s.Vb(8,"label",6),s.Ac(9,"Confirm password"),s.Ub(),s.Qb(10,"input",7),s.Vb(11,"button",8),s.Ac(12,"Change Password"),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Bb(1),s.lc("formGroup",r.forgotPasswordForm))},directives:[a.q,a.h,a.d,a.a,a.g,a.c],styles:["input[_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.container[_ngcontent-%COMP%]{width:50%;border-radius:5px;background-color:#f2f2f2;padding:20px}button[_ngcontent-%COMP%]{margin-left:40%}"]}),e})(),b=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-auth"]],decls:1,vars:0,template:function(e,r){1&e&&s.Qb(0,"router-outlet")},directives:[i.g],styles:[""]}),e})();var d=t("lGQG");function m(e,r){1&e&&(s.Vb(0,"small",9),s.Ac(1,"Please enter email"),s.Ub())}function u(e,r){if(1&e&&(s.Vb(0,"option",24),s.Ac(1),s.Ub()),2&e){const e=r.$implicit;s.lc("ngValue",e),s.Bb(1),s.Bc(e.name)}}function p(e,r){if(1&e){const e=s.Wb();s.Vb(0,"div",25),s.Vb(1,"div",2),s.Ac(2),s.Vb(3,"p",26),s.dc("click",(function(){s.sc(e);const t=r.index;return s.fc().selectedMaterials.splice(t,1)})),s.Ac(4," X "),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=r.$implicit;s.Bb(2),s.Cc(" ",e.name," ")}}const f=[{path:"",component:b,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class e{constructor(e,r,t,o){this.fb=e,this.authService=r,this.toastrService=t,this.router=o}ngOnInit(){this.buildForm()}buildForm(){this.loginForm=this.fb.group({email:["",a.o.required],password:["",a.o.required]})}login(){this.authService.login(this.loginForm.value).subscribe(e=>{this.toastrService.success("Login successful"),localStorage.setItem("cropit-auth-token",e.token),localStorage.setItem("userId",e.userId),localStorage.setItem("userType",e.userType),this.router.navigate(["../../"+e.userType])},e=>{this.toastrService.error(e.error)})}}return e.\u0275fac=function(r){return new(r||e)(s.Pb(a.b),s.Pb(d.a),s.Pb(l.b),s.Pb(i.b))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-login"]],decls:19,vars:3,consts:[[1,"login"],[3,"formGroup"],[1,"form-group"],["formControlName","email","type","email","placeholder","Enter email",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["routerLink","../forgotPassword","type","button",1,"btn","btn-primary"],["routerLink","../register"],[1,"text-danger"]],template:function(e,r){1&e&&(s.Vb(0,"div",0),s.Vb(1,"form",1),s.Vb(2,"div",2),s.Vb(3,"label"),s.Ac(4,"Email address"),s.Ub(),s.Qb(5,"input",3),s.yc(6,m,2,0,"small",4),s.Ub(),s.Vb(7,"div",2),s.Vb(8,"label"),s.Ac(9,"Password"),s.Ub(),s.Qb(10,"input",5),s.Ub(),s.Vb(11,"button",6),s.dc("click",(function(){return r.login()})),s.Ac(12,"login"),s.Ub(),s.Vb(13,"button",7),s.Ac(14,"ForgotPasswod"),s.Ub(),s.Vb(15,"div"),s.Vb(16,"a",8),s.Vb(17,"small"),s.Ac(18,"Click here to register"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Bb(1),s.lc("formGroup",r.loginForm),s.Bb(5),s.lc("ngIf",r.loginForm.get("email").getError("required")&&r.loginForm.get("email").touched),s.Bb(5),s.lc("disabled",r.loginForm.invalid))},directives:[a.q,a.h,a.d,a.a,a.g,a.c,o.l,i.c,i.e],styles:[".login[_ngcontent-%COMP%]{margin:60px 400px}"]}),e})()},{path:"register",component:(()=>{class e{constructor(e,r,t,o){this.fb=e,this.authService=r,this.toastrService=t,this.router=o,this.userType="male",this.materials=[],this.selectedMaterials=[]}ngOnInit(){this.buildForm(),this.getMaterial()}buildForm(){this.registerForm=this.fb.group({name:["",a.o.required],email:["",a.o.required],password:["",a.o.required],confirmPassword:["",a.o.required],phone:["",a.o.required],address:["",a.o.required],city:["",a.o.required],adhaar:["",a.o.required],userType:["farmer",a.o.required],material:[{name:"select material"},a.o.required],landAreaOrDomain:["",a.o.required]})}getMaterial(){this.authService.getMaterial().subscribe(e=>{this.materials=e},e=>{})}onMaterialSelect(){const e=this.registerForm.get("material").value;!this.selectedMaterials.includes(e)&&this.selectedMaterials.push(e),this.registerForm.get("material").setValue({name:"select material"})}register(){this.authService.signUp(this.getBody()).subscribe(e=>{this.toastrService.success("Register Successful"),this.router.navigate(["/"])},e=>{200!=e.status&&this.toastrService.error(e.error)})}getBody(){const e={};e["farmer"==this.registerForm.get("userType").value?"landArea":"domain"]=this.registerForm.get("landAreaOrDomain").value,e.material=this.selectedMaterials.map(e=>e._id);const r={user:{name:this.registerForm.get("name").value,email:this.registerForm.get("email").value,password:this.registerForm.get("password").value,phone:this.registerForm.get("phone").value,address:this.registerForm.get("address").value,city:this.registerForm.get("city").value,adhaar:this.registerForm.get("adhaar").value}};return r[this.registerForm.value.userType]=e,r}}return e.\u0275fac=function(r){return new(r||e)(s.Pb(a.b),s.Pb(d.a),s.Pb(l.b),s.Pb(i.b))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-register"]],decls:69,vars:5,consts:[[1,"login"],[3,"formGroup"],[1,"row"],[1,"col"],[1,"form-group"],["formControlName","name","type","text","placeholder","Enter name",1,"form-control"],["formControlName","email","type","text","placeholder","Enter email",1,"form-control"],["formControlName","phone","type","text","placeholder","Enter phone",1,"form-control"],["formControlName","city","type","text","placeholder","Enter city",1,"form-control"],["formControlName","address","type","text","placeholder","Enter address",1,"form-control"],["formControlName","adhaar","type","text","placeholder","Enter adhaar",1,"form-control"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["formControlName","confirmPassword","type","password","placeholder","Password",1,"form-control"],[1,"form-check","form-check-inline"],["type","radio","value","farmer","formControlName","userType",1,"form-check-input"],[1,"form-check-label"],["type","radio","value","company","formControlName","userType",1,"form-check-input"],["formControlName","landAreaOrDomain","type","text",1,"form-control",3,"placeholder"],["formControlName","material",1,"form-control",3,"change"],["selected","","disabled","","hidden",""],[3,"ngValue",4,"ngFor","ngForOf"],["style","margin-left: 20px;",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"click"],["routerLink","../login"],[3,"ngValue"],[2,"margin-left","20px"],[1,"text-danger",2,"margin-left","20px",3,"click"]],template:function(e,r){1&e&&(s.Vb(0,"div",0),s.Vb(1,"form",1),s.Vb(2,"div",2),s.Vb(3,"div",3),s.Vb(4,"div",4),s.Vb(5,"label"),s.Ac(6,"Name"),s.Ub(),s.Qb(7,"input",5),s.Ub(),s.Ub(),s.Vb(8,"div",3),s.Vb(9,"div",4),s.Vb(10,"label"),s.Ac(11,"Email address"),s.Ub(),s.Qb(12,"input",6),s.Ub(),s.Ub(),s.Ub(),s.Vb(13,"div",2),s.Vb(14,"div",3),s.Vb(15,"div",4),s.Vb(16,"label"),s.Ac(17,"phone"),s.Ub(),s.Qb(18,"input",7),s.Ub(),s.Ub(),s.Vb(19,"div",3),s.Vb(20,"div",4),s.Vb(21,"label"),s.Ac(22,"City"),s.Ub(),s.Qb(23,"input",8),s.Ub(),s.Ub(),s.Ub(),s.Vb(24,"div",4),s.Vb(25,"label"),s.Ac(26,"Address"),s.Ub(),s.Qb(27,"input",9),s.Ub(),s.Vb(28,"div",4),s.Vb(29,"label"),s.Ac(30,"Adhaar"),s.Ub(),s.Qb(31,"input",10),s.Ub(),s.Vb(32,"div",2),s.Vb(33,"div",3),s.Vb(34,"div",4),s.Vb(35,"label"),s.Ac(36,"Password"),s.Ub(),s.Qb(37,"input",11),s.Ub(),s.Ub(),s.Vb(38,"div",3),s.Vb(39,"div",4),s.Vb(40,"label"),s.Ac(41,"Confirm Password"),s.Ub(),s.Qb(42,"input",12),s.Ub(),s.Ub(),s.Ub(),s.Vb(43,"div",13),s.Qb(44,"input",14),s.Vb(45,"label",15),s.Ac(46,"Farmer"),s.Ub(),s.Ub(),s.Vb(47,"div",13),s.Qb(48,"input",16),s.Vb(49,"label",15),s.Ac(50,"Company"),s.Ub(),s.Ub(),s.Vb(51,"div",4),s.Vb(52,"label"),s.Ac(53),s.Ub(),s.Qb(54,"input",17),s.Ub(),s.Vb(55,"div",4),s.Vb(56,"label"),s.Ac(57,"Material"),s.Ub(),s.Vb(58,"select",18),s.dc("change",(function(){return r.onMaterialSelect()})),s.Vb(59,"option",19),s.Ac(60,"Select Material"),s.Ub(),s.yc(61,u,2,2,"option",20),s.Ub(),s.Ub(),s.yc(62,p,5,1,"div",21),s.Vb(63,"button",22),s.dc("click",(function(){return r.register()})),s.Ac(64,"Register"),s.Ub(),s.Vb(65,"div"),s.Vb(66,"a",23),s.Vb(67,"small"),s.Ac(68,"Click here to Login"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Bb(1),s.lc("formGroup",r.registerForm),s.Bb(52),s.Bc("farmer"==r.registerForm.get("userType").value?"Land area":"Domain"),s.Bb(1),s.lc("placeholder","farmer"==r.registerForm.get("userType").value?"Enter land area":"Enter domain"),s.Bb(7),s.lc("ngForOf",r.materials),s.Bb(1),s.lc("ngForOf",r.selectedMaterials))},directives:[a.q,a.h,a.d,a.a,a.g,a.c,a.l,a.n,a.j,a.p,o.k,i.e],styles:[".login[_ngcontent-%COMP%]{margin:60px 400px}"]}),e})()},{path:"forgotPassword",component:c}]}];let g=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(r){return new(r||e)},imports:[[i.f.forChild(f)],i.f]}),e})(),h=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(r){return new(r||e)},imports:[[o.b,g,a.e,a.m]]}),e})()}}]);