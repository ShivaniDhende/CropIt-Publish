function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Yj9t:function(e,r,t){"use strict";t.r(r),t.d(r,"AuthModule",(function(){return C}));var o,i,a=t("ofXK"),n=t("tyNb"),s=t("3Pt+"),l=t("fXoL"),c=t("tk/3"),b=t("5eHb"),u=((i=function(){function e(r,t,o,i){_classCallCheck(this,e),this.formBuilder=r,this.http=t,this.toastr=o,this.router=i,this.forgotPasswordForm=this.formBuilder.group({email:[null,[s.o.required]],password:[null,[s.o.required]],confirmPassword:[null,[s.o.required]]})}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"forgotPassword",value:function(){var e=this;this.forgotPasswordForm.value.password==this.forgotPasswordForm.value.confirmPassword?this.http.post("http://localhost:3000/api/forgotPassword",this.forgotPasswordForm.value).subscribe((function(r){e.toastr.success(r.message),e.router.navigate([""])}),(function(r){e.toastr.error(r.error)})):this.toastr.error("Passwords do not match")}}]),e}()).\u0275fac=function(e){return new(e||i)(l.Pb(s.b),l.Pb(c.b),l.Pb(b.b),l.Pb(n.b))},i.\u0275cmp=l.Jb({type:i,selectors:[["app-forgot-password"]],decls:13,vars:1,consts:[[1,"container"],[3,"formGroup","submit"],["for","email"],["type","text","id","email","placeholder","Email","formControlName","email"],["for","pass"],["type","password","id","pass","placeholder","New Password","formControlName","password"],["for","confirmPass"],["type","password","id","confirmPass","placeholder","Confirm password","formControlName","confirmPassword"],["type","submit",1,"btn","btn-primary"]],template:function(e,r){1&e&&(l.Vb(0,"div",0),l.Vb(1,"form",1),l.dc("submit",(function(){return r.forgotPassword()})),l.Vb(2,"label",2),l.Ac(3,"Email"),l.Ub(),l.Qb(4,"input",3),l.Vb(5,"label",4),l.Ac(6,"Password"),l.Ub(),l.Qb(7,"input",5),l.Vb(8,"label",6),l.Ac(9,"Confirm password"),l.Ub(),l.Qb(10,"input",7),l.Vb(11,"button",8),l.Ac(12,"Change Password"),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Bb(1),l.lc("formGroup",r.forgotPasswordForm))},directives:[s.q,s.h,s.d,s.a,s.g,s.c],styles:["input[_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.container[_ngcontent-%COMP%]{width:50%;border-radius:5px;background-color:#f2f2f2;padding:20px}button[_ngcontent-%COMP%]{margin-left:40%}"]}),i),d=((o=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=l.Jb({type:o,selectors:[["app-auth"]],decls:1,vars:0,template:function(e,r){1&e&&l.Qb(0,"router-outlet")},directives:[n.g],styles:[""]}),o),m=t("lGQG");function p(e,r){1&e&&(l.Vb(0,"small",9),l.Ac(1,"Please enter email"),l.Ub())}function f(e,r){if(1&e&&(l.Vb(0,"option",24),l.Ac(1),l.Ub()),2&e){var t=r.$implicit;l.lc("ngValue",t),l.Bb(1),l.Bc(t.name)}}function h(e,r){if(1&e){var t=l.Wb();l.Vb(0,"div",25),l.Vb(1,"div",2),l.Ac(2),l.Vb(3,"p",26),l.dc("click",(function(){l.sc(t);var e=r.index;return l.fc().selectedMaterials.splice(e,1)})),l.Ac(4," X "),l.Ub(),l.Ub(),l.Ub()}if(2&e){var o=r.$implicit;l.Bb(2),l.Cc(" ",o.name," ")}}var g,v,y,V,U=[{path:"",component:d,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(v=function(){function e(r,t,o,i){_classCallCheck(this,e),this.fb=r,this.authService=t,this.toastrService=o,this.router=i}return _createClass(e,[{key:"ngOnInit",value:function(){this.buildForm()}},{key:"buildForm",value:function(){this.loginForm=this.fb.group({email:["",s.o.required],password:["",s.o.required]})}},{key:"login",value:function(){var e=this;this.authService.login(this.loginForm.value).subscribe((function(r){e.toastrService.success("Login successful"),localStorage.setItem("cropit-auth-token",r.token),localStorage.setItem("userId",r.userId),localStorage.setItem("userType",r.userType),e.router.navigate(["../../"+r.userType])}),(function(r){e.toastrService.error(r.error)}))}}]),e}(),v.\u0275fac=function(e){return new(e||v)(l.Pb(s.b),l.Pb(m.a),l.Pb(b.b),l.Pb(n.b))},v.\u0275cmp=l.Jb({type:v,selectors:[["app-login"]],decls:19,vars:3,consts:[[1,"login"],[3,"formGroup"],[1,"form-group"],["formControlName","email","type","email","placeholder","Enter email",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["routerLink","../forgotPassword","type","button",1,"btn","btn-primary"],["routerLink","../register"],[1,"text-danger"]],template:function(e,r){1&e&&(l.Vb(0,"div",0),l.Vb(1,"form",1),l.Vb(2,"div",2),l.Vb(3,"label"),l.Ac(4,"Email address"),l.Ub(),l.Qb(5,"input",3),l.yc(6,p,2,0,"small",4),l.Ub(),l.Vb(7,"div",2),l.Vb(8,"label"),l.Ac(9,"Password"),l.Ub(),l.Qb(10,"input",5),l.Ub(),l.Vb(11,"button",6),l.dc("click",(function(){return r.login()})),l.Ac(12,"login"),l.Ub(),l.Vb(13,"button",7),l.Ac(14,"ForgotPasswod"),l.Ub(),l.Vb(15,"div"),l.Vb(16,"a",8),l.Vb(17,"small"),l.Ac(18,"Click here to register"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Bb(1),l.lc("formGroup",r.loginForm),l.Bb(5),l.lc("ngIf",r.loginForm.get("email").getError("required")&&r.loginForm.get("email").touched),l.Bb(5),l.lc("disabled",r.loginForm.invalid))},directives:[s.q,s.h,s.d,s.a,s.g,s.c,a.l,n.c,n.e],styles:[".login[_ngcontent-%COMP%]{margin:60px 400px}"]}),v)},{path:"register",component:(g=function(){function e(r,t,o,i){_classCallCheck(this,e),this.fb=r,this.authService=t,this.toastrService=o,this.router=i,this.userType="male",this.materials=[],this.selectedMaterials=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.buildForm(),this.getMaterial()}},{key:"buildForm",value:function(){this.registerForm=this.fb.group({name:["",s.o.required],email:["",s.o.required],password:["",s.o.required],confirmPassword:["",s.o.required],phone:["",s.o.required],address:["",s.o.required],city:["",s.o.required],adhaar:["",s.o.required],userType:["farmer",s.o.required],material:[{name:"select material"},s.o.required],landAreaOrDomain:["",s.o.required]})}},{key:"getMaterial",value:function(){var e=this;this.authService.getMaterial().subscribe((function(r){e.materials=r}),(function(e){}))}},{key:"onMaterialSelect",value:function(){var e=this.registerForm.get("material").value;!this.selectedMaterials.includes(e)&&this.selectedMaterials.push(e),this.registerForm.get("material").setValue({name:"select material"})}},{key:"register",value:function(){var e=this;this.authService.signUp(this.getBody()).subscribe((function(r){e.toastrService.success("Register Successful"),e.router.navigate(["/"])}),(function(r){200!=r.status&&e.toastrService.error(r.error)}))}},{key:"getBody",value:function(){var e={};e["farmer"==this.registerForm.get("userType").value?"landArea":"domain"]=this.registerForm.get("landAreaOrDomain").value,e.material=this.selectedMaterials.map((function(e){return e._id}));var r={user:{name:this.registerForm.get("name").value,email:this.registerForm.get("email").value,password:this.registerForm.get("password").value,phone:this.registerForm.get("phone").value,address:this.registerForm.get("address").value,city:this.registerForm.get("city").value,adhaar:this.registerForm.get("adhaar").value}};return r[this.registerForm.value.userType]=e,r}}]),e}(),g.\u0275fac=function(e){return new(e||g)(l.Pb(s.b),l.Pb(m.a),l.Pb(b.b),l.Pb(n.b))},g.\u0275cmp=l.Jb({type:g,selectors:[["app-register"]],decls:69,vars:5,consts:[[1,"login"],[3,"formGroup"],[1,"row"],[1,"col"],[1,"form-group"],["formControlName","name","type","text","placeholder","Enter name",1,"form-control"],["formControlName","email","type","text","placeholder","Enter email",1,"form-control"],["formControlName","phone","type","text","placeholder","Enter phone",1,"form-control"],["formControlName","city","type","text","placeholder","Enter city",1,"form-control"],["formControlName","address","type","text","placeholder","Enter address",1,"form-control"],["formControlName","adhaar","type","text","placeholder","Enter adhaar",1,"form-control"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["formControlName","confirmPassword","type","password","placeholder","Password",1,"form-control"],[1,"form-check","form-check-inline"],["type","radio","value","farmer","formControlName","userType",1,"form-check-input"],[1,"form-check-label"],["type","radio","value","company","formControlName","userType",1,"form-check-input"],["formControlName","landAreaOrDomain","type","text",1,"form-control",3,"placeholder"],["formControlName","material",1,"form-control",3,"change"],["selected","","disabled","","hidden",""],[3,"ngValue",4,"ngFor","ngForOf"],["style","margin-left: 20px;",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"click"],["routerLink","../login"],[3,"ngValue"],[2,"margin-left","20px"],[1,"text-danger",2,"margin-left","20px",3,"click"]],template:function(e,r){1&e&&(l.Vb(0,"div",0),l.Vb(1,"form",1),l.Vb(2,"div",2),l.Vb(3,"div",3),l.Vb(4,"div",4),l.Vb(5,"label"),l.Ac(6,"Name"),l.Ub(),l.Qb(7,"input",5),l.Ub(),l.Ub(),l.Vb(8,"div",3),l.Vb(9,"div",4),l.Vb(10,"label"),l.Ac(11,"Email address"),l.Ub(),l.Qb(12,"input",6),l.Ub(),l.Ub(),l.Ub(),l.Vb(13,"div",2),l.Vb(14,"div",3),l.Vb(15,"div",4),l.Vb(16,"label"),l.Ac(17,"phone"),l.Ub(),l.Qb(18,"input",7),l.Ub(),l.Ub(),l.Vb(19,"div",3),l.Vb(20,"div",4),l.Vb(21,"label"),l.Ac(22,"City"),l.Ub(),l.Qb(23,"input",8),l.Ub(),l.Ub(),l.Ub(),l.Vb(24,"div",4),l.Vb(25,"label"),l.Ac(26,"Address"),l.Ub(),l.Qb(27,"input",9),l.Ub(),l.Vb(28,"div",4),l.Vb(29,"label"),l.Ac(30,"Adhaar"),l.Ub(),l.Qb(31,"input",10),l.Ub(),l.Vb(32,"div",2),l.Vb(33,"div",3),l.Vb(34,"div",4),l.Vb(35,"label"),l.Ac(36,"Password"),l.Ub(),l.Qb(37,"input",11),l.Ub(),l.Ub(),l.Vb(38,"div",3),l.Vb(39,"div",4),l.Vb(40,"label"),l.Ac(41,"Confirm Password"),l.Ub(),l.Qb(42,"input",12),l.Ub(),l.Ub(),l.Ub(),l.Vb(43,"div",13),l.Qb(44,"input",14),l.Vb(45,"label",15),l.Ac(46,"Farmer"),l.Ub(),l.Ub(),l.Vb(47,"div",13),l.Qb(48,"input",16),l.Vb(49,"label",15),l.Ac(50,"Company"),l.Ub(),l.Ub(),l.Vb(51,"div",4),l.Vb(52,"label"),l.Ac(53),l.Ub(),l.Qb(54,"input",17),l.Ub(),l.Vb(55,"div",4),l.Vb(56,"label"),l.Ac(57,"Material"),l.Ub(),l.Vb(58,"select",18),l.dc("change",(function(){return r.onMaterialSelect()})),l.Vb(59,"option",19),l.Ac(60,"Select Material"),l.Ub(),l.yc(61,f,2,2,"option",20),l.Ub(),l.Ub(),l.yc(62,h,5,1,"div",21),l.Vb(63,"button",22),l.dc("click",(function(){return r.register()})),l.Ac(64,"Register"),l.Ub(),l.Vb(65,"div"),l.Vb(66,"a",23),l.Vb(67,"small"),l.Ac(68,"Click here to Login"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.Bb(1),l.lc("formGroup",r.registerForm),l.Bb(52),l.Bc("farmer"==r.registerForm.get("userType").value?"Land area":"Domain"),l.Bb(1),l.lc("placeholder","farmer"==r.registerForm.get("userType").value?"Enter land area":"Enter domain"),l.Bb(7),l.lc("ngForOf",r.materials),l.Bb(1),l.lc("ngForOf",r.selectedMaterials))},directives:[s.q,s.h,s.d,s.a,s.g,s.c,s.l,s.n,s.j,s.p,a.k,n.e],styles:[".login[_ngcontent-%COMP%]{margin:60px 400px}"]}),g)},{path:"forgotPassword",component:u}]}],w=((V=function e(){_classCallCheck(this,e)}).\u0275mod=l.Nb({type:V}),V.\u0275inj=l.Mb({factory:function(e){return new(e||V)},imports:[[n.f.forChild(U)],n.f]}),V),C=((y=function e(){_classCallCheck(this,e)}).\u0275mod=l.Nb({type:y}),y.\u0275inj=l.Mb({factory:function(e){return new(e||y)},imports:[[a.b,w,s.e,s.m]]}),y)}}]);